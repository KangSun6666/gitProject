<!DOCTYPE html>
<html lang="en" html xmlns:th=http://www.thymeleaf.org>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link th:href="@{/static/font-awesome/css/font-awesome.css}" rel="stylesheet" />
    <link th:href="@{/static/css/style.css}" rel="stylesheet" />
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/My97DatePicker/WdatePicker.js"></script>
    <script src="/static/My97DatePicker/skin/WdatePicker.css"></script>
    <script src="/static/js/AutoScroll.js"></script>
    <script src="/static/js/jquery-3.2.1.js"></script>
    <script src="/static/js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="/static/js/jquery.validate.min.js" ></script>
    <script type="text/javascript" src="/static/js/message.js" ></script>
    <title>预约</title>
</head>
<body>
<div id="wrapper">
    <nav class="navbar-default navbar-static-side" role="navigation" th:include="nav-client :: navigation"></nav>
    <div id="page-wrapper" class="gray-bg">
        <div class="border-bottom" th:include="header-client :: headerTop"></div>
        <div class="row wrapper border-bottom white-bg page-heading" th:fragment="headerNav">
            <div class="col-lg-10">
                <h2>预约</h2>
                <ol class="breadcrumb">
                    <li>
                        <a>首页</a>
                    </li>
                    <li>
                        <a>设备查询</a>
                    </li>
                    <li class="active">
                        <a>预约</a>
                    </li>
                </ol>
            </div>
            <div class="col-lg-2">
            </div>
        </div>

        <div align="center">
            <h3><label th:text="${session.user.name}"></label>,欢迎预约</h3>
        </div>
        <div>
            <form id="appo_form" action="/appo/appointment" method="post">
                <div class="row" style="margin:20px">
                </div>
                <div class="row" style="margin:20px">
                </div>
                <div class="row" style="margin:20px">
                </div>
                <div class="row" style="margin:30px">
                    <div class="col-sm-3">
                        <div class="input-group">
                            <span class="input-group-addon">序号:</span>
                            <input type="text" name="id" class="form-control" th:value="${machine.id}" readonly >
                            <!--序号:<input type="text"  name="id" th:value="${machine.id}" style="margin:20px" readonly />-->
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="input-group">
                            <span class="input-group-addon">设备编号:</span>
                            <input type="text" class="form-control" id="machine_id" name="machine_id" th:value="${machine.machine_id}" readonly >
                            <!--设备编号:<input type="text" id="machine_id" name="machine_id" th:value="${machine.machine_id}" style="margin:20px" readonly/>-->
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="input-group">
                            <span class="input-group-addon"> 生产厂家:</span>
                            <input type="text" class="form-control" name="m_factory" th:value="${machine.m_factory}"  readonly >
                            <!--生产厂家:<input type="text" name="m_factory" th:value="${machine.m_factory}" style="margin:20px" readonly />-->
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="input-group">
                            <span class="input-group-addon"> 用途:</span>
                            <input type="text" class="form-control" name="machine_usage" th:value="${machine.m_usage}"  readonly >
                            <!--用途:<input type="text" name="machine_usage" th:value="${machine.m_usage}" style="margin:20px" readonly/>-->
                        </div>
                    </div>
                </div>
                <div  class="row" style="margin:30px">
                    <div class="col-sm-3">
                        <div class="input-group">
                            <span class="input-group-addon"> 详情:</span>
                            <input type="text" class="form-control" name="description" th:value="${machine.description}"  readonly >
                            <!--详情:<input type="text" name="description" th:value="${machine.description}" style="margin:20px" readonly />-->
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="input-group">
                            <span class="input-group-addon"> 设备状态:</span>
                            <input type="text" class="form-control" name="use_status" th:value="${machine.use_status}"  readonly >
                            <!--设备状态:<input type="text" name="use_status" th:value="${machine.use_status}" style="margin:20px" readonly/>-->
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="input-group">
                            <span class="input-group-addon"> 用户姓名:</span>
                            <input type="text" class="form-control" name="use_name" th:value="${session.user.name}" readonly >
                            <!--用户姓名:<input type="text" name="use_name" th:value="${session.user.name}" style="margin:20px" readonly/>-->
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="input-group">
                            <span class="input-group-addon"> 编号:</span>
                            <input type="text" class="form-control" name="use_id" th:value="${session.user.id}"  readonly >
                            <!--编号:<input type="text" name="use_id" th:value="${session.user.id}" style="margin:20px" readonly/>-->
                        </div>
                    </div>
                </div>

                <div class="row" style="margin:30px">
                    <div class="col-sm-3">
                        <div class="input-group">
                            <span class="input-group-addon"> 预约开始使用时间:</span>
                            <input id="startDate" name="pstart_use_time" class="Wdate form-control" type="text" onfocus="WdatePicker({disabledDates:['....-..-.. 00\:..\:..','....-..-.. 01\:..\:..','....-..-.. 02\:..\:..','....-..-.. 03\:..\:..','....-..-.. 04\:..\:..','....-..-.. 05\:..\:..','....-..-.. 06\:..\:..','....-..-.. 07\:..\:..','....-..-.. 22\:..\:..','....-..-.. 23\:..\:..'] ,dateFmt:'yyyy-MM-dd HH:00:01',minDate:'%y-%M-%d %H:00:01',maxDate:'%y-%M-#{%d+1} 21:00:00'})" required/>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="input-group">
                            <span class="input-group-addon"> 预约结束使用时间:</span>
                            <input name="pend_use_time" class="Wdate form-control" type="text" onfocus="WdatePicker({disabledDates:['....-..-.. 00\:..\:..','....-..-.. 01\:..\:..','....-..-.. 02\:..\:..','....-..-.. 03\:..\:..','....-..-.. 04\:..\:..','....-..-.. 05\:..\:..','....-..-.. 06\:..\:..','....-..-.. 07\:..\:..','....-..-.. 08\:..\:..','....-..-.. 22\:..\:..','....-..-.. 23\:..\:..'] , dateFmt:'yyyy-MM-dd HH:00:00',minDate:'#F{$dp.$D(\'startDate\')}',maxDate:'%y-%M-#{%d+1} 21:00:00'})"  required/>
                        </div>
                    </div>
                </div>
                <div align="center">
                    <button  id="sub" type="submit" class="btn btn-primary btn-primary">提交预约</button>
                </div>
            </form>
            <div class="row" align="center">
                <div id="text" style="width:800px;height:auto;color:red">公告：欢迎登录本网站，本站所有设备的预约时间段均为整点时间段（例如：8:00--10:00），预约时间为当日八点至二十一点及次日八点至二十一点，预约后请及时进入操作，距开始时间一小时以内不支持取消！谢谢合作。</div>
            </div>
            <div>
                <button type="button" id="view" class="btn btn-primary btn-primary form-control">查看已选时间段</button>
            </div>
            <div>
                <textarea class="form-control" id="text2" rows="2"  readonly></textarea>
            </div>
        </div>
    </div>
    <div class="footer" th:include="footer-client :: copyright"></div>
</div>
</div>
<script type="text/javascript">
     $().ready(function() {
        $("#appo_form").validate({
            rules: {
                pstart_use_time: "required",
                pend_use_time: "required"
            },
            messages: {
                pstart_use_time: "请选择开始时间",
                pend_use_time:   "请选择结束时间"
            }
        });
    });
	$(function() {
		$("#view").click(function() {
		    $.ajax({
				url : "/appo/haveAppointed",//请求的url
				type : "post",//请求方式
				data : {//传递的数据
					machine_id : $("#machine_id").val()
				},
				dataType : "text",//后台数据返回类型
				success : function(data) {//响应成功执行的方法
					$("#text2").val(data);
				},
				error : function() {//出现异常执行方法
					alert("网站异常，请返回主页重试");
				}
			});
		});
	});
</script>
<!-- Mainly scripts -->
<script th:src="@{/static/js/jquery-2.1.1.js}"></script>
<script th:src="@{/static/js/bootstrap.min.js}"></script>
<script th:src="@{/static/js/plugins/metisMenu/jquery.metisMenu.js}"></script>
<script th:src="@{/static/js/plugins/slimscroll/jquery.slimscroll.min.js}"></script>

<!-- Peity -->
<script th:src="@{/static/js/plugins/peity/jquery.peity.min.js}"></script>

<!-- Custom and plugin javascript -->
<script th:src="@{/static/js/inspinia.js}"></script>
<script th:src="@{/static/js/plugins/pace/pace.min.js}"></script>

<!-- Toastr script -->
<script th:src="@{/static/js/plugins/toastr/toastr.min.js}"></script>

<!-- common -->
<script th:src="@{/static/js/common.js}"></script>

<script type="text/javascript">
	var text = document.getElementById("text");
	var textAutoScroll = new TextAutoScroll();
	textAutoScroll.startScroll(text, textAutoScroll.ScrollTypeEnum.LeftRight);
</script>
</body>
</html>