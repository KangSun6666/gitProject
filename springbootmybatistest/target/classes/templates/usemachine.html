<!DOCTYPE html>
<html lang="en"  html xmlns:th=http://www.thymeleaf.org>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src="/static/js/jquery-3.2.1.js"></script>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <script src="/static/js/jquery-3.2.1.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/My97DatePicker/WdatePicker.js"></script>
    <script src="/static/js/AutoScroll.js"></script>

    <link th:href="@{/static/css/bootstrap.min.css}" rel="stylesheet" />
    <link th:href="@{/static/font-awesome/css/font-awesome.css}" rel="stylesheet" />
    <link th:href="@{/static/css/style.css}" rel="stylesheet" />
    <title>操作界面</title>
</head>
    <script type="text/javascript">
            $(document).ready(function(){

                $("#tog").click(function(){
			        if($("#write").css("display")=="none"){
				        $("#write").show();
			        }else{
				        $("#write").hide();
			        }
		        });

		        $("#confirm").click(function() {
                    $.ajax({
                        url : "/record/writeMsg",//请求的url
                        type : "post",//请求方式
                        data : $("#formWrite").serialize(),
                        dataType : "text",//后台数据返回类型
                        success : function(data1) {//响应成功执行的方法
                            alert(data1);
                            window.location.reload();
                        },
                        error : function() {    //出现异常执行方法
                            alert("网站异常,请返回主页");
                        }
                    });
	            });

                window.setInterval("a()",3000); //每三秒钟访问一次服务器获取信息
            });

            function b(){
                var optionJson=[];
                $.ajax({
                        url : "/record/information",  //请求的url
                        type : "post",  //请求方式
                        data : {
                            id: $("#id1").val()
                        },
                        dataType : "json",  //后台数据返回类型
                        success : function(data) {  //响应成功执行的方法
                            // alert(data);
                            optionJson = data;
                            var str = "";
                            for(var i = 0 ; i  < optionJson.length ; i++){
                                str+="<tr>"+
                                    "<td>"+"*数据编号："+optionJson[i].infoId+"</td>"+
                                    "<td>"+"*数据日期："+optionJson[i].readDate+"</td>"+
                                    "<td>"+"*标线编号："+optionJson[i].productType+"</td>"+
                                    "<td>"+"*fd值："+optionJson[i].fd+"</td>"+
                                    "<td>"+"*仪器编号："+optionJson[i].machineId+"</td>"+
                                    "</tr>"
                            }
                            document.getElementById("tbodydata").innerHTML=str;
                        },
                        error : function() {    //出现异常执行方法
                            alert("无数据返回");
                        }
                });
            }

            function c(){
                $.ajax({
                    url : "/record/otherInfo",  //请求的url
                    type : "post",  //请求方式
                    data : {
                        id: $("#id1").val()
                    },
                    dataType : "json",  //后台数据返回类型
                    success : function(data) {  //响应成功执行的方法
                        // alert(data);
                        var optionJson = data;
                        var str1 = "";
                        str1+="<tr>"+
                            "<td>"+"*检测次数："+optionJson.testAccount+"</td>"+
                            "<td>"+"*检测语言："+optionJson.language+"</td>"+
                            "<td>"+"*检测日期："+optionJson.testDate+"</td>"+
                            "<td>"+"*打印类型："+optionJson.printType+"</td>"+
                            "<td>"+"*输出类型："+optionJson.outType+"</td>"+
                            "<td>"+"*标线编号："+optionJson.stdId+"</td>"+
                            "<td>"+"*光源时间："+optionJson.lightingMinute+"</td>"+
                            "<td>"+"*仪器编号："+optionJson.machineId+"</td>"+
                            "</tr>";
                        document.getElementById("tbodydata").innerHTML=str1;
                    },
                    error : function() {    //出现异常执行方法
                        alert("无数据返回");
                    }
                });
            }

            function d(){
                var optionJson=[];
                $.ajax({
                    url : "/record/std",  //请求的url
                    type : "post",  //请求方式
                    data : {
                        id: $("#id1").val()
                    },
                    dataType : "json",  //后台数据返回类型
                    success : function(data) {  //响应成功执行的方法
                        // alert(data);
                        optionJson = data;
                        var str = "";
                        for(var i = 0 ; i  < optionJson.length ; i++){
                            str+="<tr>"+
                                "<td>"+"*编号"+i+":"+optionJson[i].toString()+"</td>"+
                                "</tr>"
                        }
                        document.getElementById("tbodydata").innerHTML=str;
                    },
                    error : function() {    //出现异常执行方法
                        alert("无数据返回");
                    }
                });
            }

            function e(){
                $.ajax({
                    url : "/record/machineInfo",  //请求的url
                    type : "post",  //请求方式
                    data : {
                        id: $("#id1").val()
                    },
                    dataType : "json",  //后台数据返回类型
                    success : function(data) {  //响应成功执行的方法
                        // alert(data);
                        var optionJson = data;
                        var str = "";
                            str+="<tr>"+
                                "<td>"+"*编号："+optionJson.machine_id+"</td>"+
                                "<td>"+"*版本："+optionJson.description+"</td>"+
                                "<td>"+"*状态："+optionJson.use_status+"</td>"+
                                "</tr>";
                        document.getElementById("tbodydata").innerHTML=str;
                    },
                    error : function() {    //出现异常执行方法
                        alert("无数据返回");
                    }
                });
            }

            function a(){
                $.ajax({
                        url : "/record/countTime",  //请求的url
                        type : "post",  //请求方式
                        data : {
                            endTime: $("#end").val()
                        },
                        dataType : "text",  //后台数据返回类型
                        success : function(data) {  //响应成功执行的方法
                            <!--alert(data);-->
                            var textId=$("#d1");    //根据文本框的id找到这个文本框，并将其变成jquery对象
                            textId.val();   //清空原来的值
                            textId.val(data);   //重新赋值
                            console.log(data)

                            if(data == "1"){
                                <!--console.log(data)-->
                                $("#submit").click();  //时间到，提交表单
                            }
                        },
                        error : function() {    //出现异常执行方法
                            alert("网站异常,请返回主页");
                        }
                });
            }
    </script>
<body>
    <div id="wrapper">
        <nav class="navbar-default navbar-static-side" role="navigation" th:include="nav-client :: navigation"></nav>
        <div id="page-wrapper" class="gray-bg">
            <div class="border-bottom" th:include="header-client :: headerTop"></div>
            <div class="row wrapper border-bottom white-bg page-heading" th:fragment="headerNav">
                <div class="col-lg-10">
                    <h2>操作台</h2>
                    <ol class="breadcrumb">
                        <li>
                            <a>首页</a>
                        </li>
                        <li>
                            <a>预约</a>
                        </li>
                        <li class="active">
                            <a>操作台</a>
                        </li>
                    </ol>
                </div>
                <div class="col-lg-2">
                </div>
            </div>
            <div>
                <input id="d1" type="text" class="form-control" style="color:red">
            </div>
            <div>
                <form id="form" action="/record/addRecord" method="post">
                    <div class="row" style="margin:20px">
                    </div>
                    <div class="row" style="margin:20px">
                    </div>
                    <div class="row" style="margin:20px">
                    </div>
                    <div class="row" style="margin:30px">
                        <div class="col-sm-4">
                            <div class="input-group">
                                <span class="input-group-addon">序号:</span>
                                <input id="id1" type="text" name="id" class="form-control" th:value="${app.id}" readonly >
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="input-group">
                                <span class="input-group-addon">设备编号:</span>
                                <input type="text" class="form-control" id="machine_id" name="machine_id" th:value="${app.machine_id}" readonly >
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="input-group">
                                <span class="input-group-addon"> 设备用途:</span>
                                <input type="text" class="form-control" name="machine_usage" th:value="${app.machine_usage}"  readonly >
                                <!--用途:<input type="text" name="machine_usage" th:value="${machine.m_usage}" style="margin:20px" readonly/>-->
                            </div>
                        </div>
                    </div>
                    <div  class="row" style="margin:30px">
                        <div class="col-sm-6">
                            <div class="input-group">
                                <span class="input-group-addon"> 用户姓名:</span>
                                <input type="text" class="form-control" name="use_name" th:value="${app.use_name}" readonly >
                                <!--用户姓名:<input type="text" name="use_name" th:value="${session.user.name}" style="margin:20px" readonly/>-->
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="input-group">
                                <span class="input-group-addon"> 用户编号:</span>
                                <input type="text" class="form-control" name="use_id" th:value="${app.use_id}"  readonly >
                                <!--编号:<input type="text" name="use_id" th:value="${session.user.id}" style="margin:20px" readonly/>-->
                            </div>
                        </div>
                    </div>

                    <div class="row" style="margin:30px">
                        <div class="col-sm-6">
                            <div class="input-group">
                                <span class="input-group-addon"> 开始使用时间:</span>
                                <input name="start_use_time" class="Wdate" type="text" th:value="${#dates.format(app.pstart_use_time, 'yyyy-MM-dd HH:mm:ss')}" readonly/>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="input-group">
                                <span class="input-group-addon"> 结束使用时间:</span>
                                <input name="end_use_time" id="end" class="Wdate" type="text" th:value="${#dates.format(app.pend_use_time, 'yyyy-MM-dd HH:mm:ss')}" readonly/>
                            </div>
                        </div>
                    </div>
                    <div align="center">
                        <a style="color:red" class="btn btn-primary btn-primary" onclick="b()">读取数据</a>
                        <a style="color:red" class="btn btn-primary btn-primary" onclick="c()">读取其他参数</a>
                        <a style="color:red" class="btn btn-primary btn-primary" onclick="d()">读取标线名称</a>
                        <a style="color:red" class="btn btn-primary btn-primary" onclick="e()">读取仪器信息与状态</a>
                        <a style="color:red" id="tog" class="btn btn-primary btn-primary">写入参数</a>
                        <input id="submit" type="submit" class="btn btn-primary btn-primary" value="结束操作"/>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-striped " id="tbodydata">
                        </table>
                    </div>
                </form>
                <div id="write" style="display:none">
                    <form id="formWrite">
                        <div class="row" style="margin:30px">
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label>检测次数:</label>
                                    <select class="form-control" name="testAmount" id="testAmount">
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                        <option value="6">6</option>
                                    </select>
                                </div>
                                <!--<div class="input-group">-->
                                    <!--<span class="input-group-addon">检测次数:</span>-->
                                    <!--<input type="text" name="testAmount" class="form-control">-->
                                <!--</div>-->
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label>仪器语言:</label>
                                    <select class="form-control" name="language" id="language">
                                        <option value="0">中文</option>
                                        <option value="1">英文</option>
                                        <option value="2">日语</option>
                                    </select>
                                </div>
                                <!--<div class="input-group">-->
                                    <!--<span class="input-group-addon">仪器语言:</span>-->
                                    <!--<input type="text" class="form-control" name="language">-->
                                <!--</div>-->
                            </div>
                            <div class="col-sm-4">
                                <div class="input-group">
                                    <span class="input-group-addon"> 日期:</span>
                                    <input type="text" id="testDate" class="form-control" name="testDate" placeholder="格式：19-05-01">
                                </div>
                            </div>
                        </div>
                        <div  class="row" style="margin:30px">
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label>打印模式:</label>
                                    <select class="form-control" name="printType" id="printType">
                                        <option value="0">微型打印机</option>
                                        <option value="1">模式A</option>
                                        <option value="2">模式B</option>
                                        <option value="3">不打印</option>
                                    </select>
                                </div>
                                <!--<div class="input-group">-->
                                    <!--<span class="input-group-addon"> 打印模式:</span>-->
                                    <!--<input type="text" class="form-control" name="printType">-->
                                <!--</div>-->
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group">
                                    <label>输出模式:</label>
                                    <select class="form-control" name="outType" id="outType">
                                        <option value="0">RS232C</option>
                                        <option value="1">U盘</option>
                                    </select>
                                </div>
                                <!--<div class="input-group">-->
                                    <!--<span class="input-group-addon"> 输出模式:</span>-->
                                    <!--<input type="text" class="form-control" name="outType">-->
                                <!--</div>-->
                            </div>
                            <div class="col-sm-4">
                                <div class="input-group">
                                    <span class="input-group-addon"> 标线编号:</span>
                                    <input type="text" id="stdId" class="form-control" name="stdId" placeholder="标线范围：0-19">
                                </div>
                            </div>
                        </div>
                        <div class="row" align="center">
                            <input type="submit" id="confirm" class="btn btn-primary btn-primary" value="确认写入"/>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!--<div class="footer" th:include="footer-client :: copyright"></div>-->
    </div>

<!-- Mainly scripts -->
<script th:src="@{/static/js/jquery-2.1.1.js}"></script>
<script th:src="@{/static/js/bootstrap.min.js}"></script>
<script th:src="@{/static/js/plugins/metisMenu/jquery.metisMenu.js}"></script>
<script th:src="@{/static/js/plugins/slimscroll/jquery.slimscroll.min.js}"></script>

<!-- Peity -->
<script th:src="@{/static/js/plugins/peity/jquery.peity.min.js}"></script>

<!-- Custom and plugin javascript -->
<script th:src="@{/static/js/inspinia.js}"></script>
<script th:src="@{/static/js/plugins/pace/pace.min.js}"></script>

<!-- Toastr script -->
<script th:src="@{/static/js/plugins/toastr/toastr.min.js}"></script>

<!-- common -->
<script th:src="@{/static/js/common.js}"></script>
</body>
</html>